{'role': 'assistant', 'content': '## Step 2: Create API endpoint to fetch classes and sections\n\n<function_calls>\n<create-file file_path="server/src/controllers/academic.controller.ts">\nimport { Request, Response } from \'express\';\nimport { eq } from \'drizzle-orm\';\nimport { db } from \'../db\';\nimport { classes, sections, subjects, academicSessions } from \'../db/schema\';\nimport { successResponse, errorResponse } from \'../utils/response\';\n\nexport class AcademicController {\n  // Get all classes\n  async getAllClasses(req: Request, res: Response) {\n    try {\n      const allClasses = await db.query.classes.findMany({\n        with: {\n          academicSession: true,\n          shift: true,\n        },\n      });\n\n      return successResponse(res, allClasses);\n    } catch (error) {\n      console.error(\'Get all classes error:\', error);\n      return errorResponse(res, \'Failed to fetch classes\', 500);\n    }\n  }\n\n  // Get sections by class ID\n  async getSectionsByClass(req: Request, res: Response) {\n    try {\n      const { classId } = req.params;\n\n      const classSections = await db.query.sections.findMany({\n        where: eq(sections.classId, classId),\n      });\n\n      return successResponse(res, classSections);\n    } catch (error) {\n      console.error(\'Get sections by class error:\', error);\n      return errorResponse(res, \'Failed to fetch sections\', 500);\n    }\n  }\n\n  // Get all sections\n  async getAllSections(req: Request, res: Response) {\n    try {\n      const allSections = await db.query.sections.findMany({\n        with: {\n          class: true,\n        },\n      });\n\n      return successResponse(res, allSections);\n    } catch (error) {\n      console.error(\'Get all sections error:\', error);\n      return errorResponse(res, \'Failed to fetch sections\', 500);\n    }\n  }\n\n  // Get all subjects\n  async getAllSubjects(req: Request, res: Response) {\n    try {\n      const allSubjects = await db.query.subjects.findMany();\n\n      return successResponse(res, allSubjects);\n    } catch (error) {\n      console.error(\'Get all subjects error:\', error);\n      return errorResponse(res, \'Failed to fetch subjects\', 500);\n    }\n  }\n\n  // Get current academic session\n  async getCurrentSession(req: Request, res: Response) {\n    try {\n      const currentSession = await db.query.academicSessions.findFirst({\n        where: eq(academicSessions.isCurrent, true),\n      });\n\n      return successResponse(res, currentSession);\n    } catch (error) {\n      console.error(\'Get current session error:\', error);\n      return errorResponse(res, \'Failed to fetch current session\', 500);\n    }\n  }\n\n  // Get all academic sessions\n  async getAllSessions(req: Request, res: Response) {\n    try {\n      const allSessions = await db.query.academicSessions.findMany();\n\n      return successResponse(res, allSessions);\n    } catch (error) {\n      console.error(\'Get all sessions error:\', error);\n      return errorResponse(res, \'Failed to fetch sessions\', 500);\n    }\n  }\n}\n</create-file>\n</function_calls>'}