{'role': 'assistant', 'content': '<function_calls>\n<create-file file_path="server/src/db/index.ts">\nimport { drizzle } from \'drizzle-orm/node-postgres\';\nimport pg from \'pg\';\nimport * as schema from \'./schema\';\n\nconst { Pool } = pg;\n\n// Create PostgreSQL connection pool\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n  max: 20,\n  idleTimeoutMillis: 30000,\n  connectionTimeoutMillis: 2000,\n});\n\n// Create Drizzle instance\nexport const db = drizzle(pool, { schema });\n\n// Export pool for session store\nexport { pool };\n\n// Test database connection\nexport async function testConnection() {\n  try {\n    const client = await pool.connect();\n    console.log(\'✅ Database connected successfully\');\n    client.release();\n    return true;\n  } catch (error) {\n    console.error(\'❌ Database connection failed:\', error);\n    return false;\n  }\n}\n</create-file>\n</function_calls>'}