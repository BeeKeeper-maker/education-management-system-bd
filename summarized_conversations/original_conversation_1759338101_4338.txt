{'role': 'assistant', 'content': '<function_calls>\n<create-file file_path="server/src/db/schema/students.ts">\nimport { pgTable, text, timestamp, uuid, varchar, integer, boolean } from \'drizzle-orm/pg-core\';\nimport { users } from \'./users\';\nimport { classes, sections } from \'./academic\';\nimport { academicSessions } from \'./organization\';\n\nexport const students = pgTable(\'students\', {\n  id: uuid(\'id\').defaultRandom().primaryKey(),\n  userId: uuid(\'user_id\').references(() => users.id).notNull().unique(),\n  studentId: varchar(\'student_id\', { length: 50 }).unique().notNull(), // Unique student ID\n  admissionNumber: varchar(\'admission_number\', { length: 50 }).unique(),\n  admissionDate: timestamp(\'admission_date\').notNull(),\n  rollNumber: varchar(\'roll_number\', { length: 50 }),\n  guardianName: varchar(\'guardian_name\', { length: 255 }),\n  guardianPhone: varchar(\'guardian_phone\', { length: 20 }),\n  guardianEmail: varchar(\'guardian_email\', { length: 255 }),\n  guardianRelation: varchar(\'guardian_relation\', { length: 50 }), // father, mother, guardian\n  emergencyContact: varchar(\'emergency_contact\', { length: 20 }),\n  previousSchool: varchar(\'previous_school\', { length: 255 }),\n  medicalInfo: text(\'medical_info\'),\n  status: varchar(\'status\', { length: 50 }).default(\'active\').notNull(), // active, inactive, graduated, transferred\n  createdAt: timestamp(\'created_at\').defaultNow().notNull(),\n  updatedAt: timestamp(\'updated_at\').defaultNow().notNull(),\n});\n\nexport const enrollments = pgTable(\'enrollments\', {\n  id: uuid(\'id\').defaultRandom().primaryKey(),\n  studentId: uuid(\'student_id\').references(() => students.id).notNull(),\n  classId: uuid(\'class_id\').references(() => classes.id).notNull(),\n  sectionId: uuid(\'section_id\').references(() => sections.id).notNull(),\n  academicSessionId: uuid(\'academic_session_id\').references(() => academicSessions.id).notNull(),\n  enrollmentDate: timestamp(\'enrollment_date\').defaultNow().notNull(),\n  status: varchar(\'status\', { length: 50 }).default(\'active\').notNull(), // active, completed, transferred\n  createdAt: timestamp(\'created_at\').defaultNow().notNull(),\n  updatedAt: timestamp(\'updated_at\').defaultNow().notNull(),\n});\n\nexport const guardians = pgTable(\'guardians\', {\n  id: uuid(\'id\').defaultRandom().primaryKey(),\n  userId: uuid(\'user_id\').references(() => users.id).notNull().unique(),\n  occupation: varchar(\'occupation\', { length: 255 }),\n  income: varchar(\'income\', { length: 50 }),\n  createdAt: timestamp(\'created_at\').defaultNow().notNull(),\n  updatedAt: timestamp(\'updated_at\').defaultNow().notNull(),\n});\n\nexport const studentGuardians = pgTable(\'student_guardians\', {\n  id: uuid(\'id\').defaultRandom().primaryKey(),\n  studentId: uuid(\'student_id\').references(() => students.id).notNull(),\n  guardianId: uuid(\'guardian_id\').references(() => guardians.id).notNull(),\n  relation: varchar(\'relation\', { length: 50 }).notNull(), // father, mother, guardian, other\n  isPrimary: boolean(\'is_primary\').default(false).notNull(),\n  createdAt: timestamp(\'created_at\').defaultNow().notNull(),\n});\n\nexport type Student = typeof students.$inferSelect;\nexport type Enrollment = typeof enrollments.$inferSelect;\nexport type Guardian = typeof guardians.$inferSelect;\nexport type StudentGuardian = typeof studentGuardians.$inferSelect;\n</create-file>\n</function_calls>'}