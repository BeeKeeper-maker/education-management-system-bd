import { Request, Response } from 'express';
import { db } from '../db';
import { books, bookIssues } from '../db/schema';
import { eq, and, or, sql, desc, asc, like, lte, gte } from 'drizzle-orm';

// Get all books
export const getBooks = async (req: Request, res: Response) => {
  try {
    const { search, category, language, isActive } = req.query;

    const conditions = [];
    
    if (search) {
      const searchTerm = `%${search}%`;
      conditions.push(
        or(
          like(books.title, searchTerm),
          like(books.author, searchTerm),
          like(books.isbn, searchTerm)
        )
