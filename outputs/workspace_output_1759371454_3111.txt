import { Link, useLocation } from 'wouter';
import { cn } from '@/lib/utils';
import { t } from '@/i18n';
import { LogOut, ChevronLeft, ChevronRight } from 'lucide-react';
import { useAuth } from '@/contexts/AuthContext';
import { Button } from '@/components/ui/button';
import { getNavigationForRole } from '@/lib/navigation';
import { useState } from 'react';
import { Badge } from '@/components/ui/badge';

export default function Sidebar() {
  const [location] = useLocation();
  const { user, logout } = useAuth();
  const [isCollapsed, setIsCollapsed] = useState(false);

  const handleLogout = async () => {
    await logout();
  };

  // Get navigation items based on user role
  const navigation = user ? getNavigationForRole(user.role) : [];

  return (
    <div className={cn(
      "flex flex-col h-full bg-card border-r transition-all duration-300",
      isCollapsed ? "w-16" : "w-64"
    )}>
      {/* Logo */}
      <div className="p-4 border-b flex items-center justify-between">
        {!isCollapsed && (
